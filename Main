if _G.BigUniversalScriptLoaded then return end
_G.BigUniversalScriptLoaded = true
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:FindFirstChildOfClass("Humanoid")
local HRP = Character:WaitForChild("HumanoidRootPart")
LocalPlayer.CharacterAdded:Connect(function(char)
	Character = char
	Humanoid = char:WaitForChild("Humanoid")
	HRP = char:WaitForChild("HumanoidRootPart")
end)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BigUniversalGUI"
ScreenGui.Parent = game.CoreGui
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0,300,0,400)
MainFrame.Position = UDim2.new(0,50,0.5,-200)
MainFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
MainFrame.Active = true
MainFrame.Draggable = true
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1,0,0,40)
Title.BackgroundTransparency = 1
Title.Text = "Big Universal Hack Menu"
Title.TextColor3 = Color3.new(1,1,1)
Title.TextScaled = true
local hackList = {{"Fling Hack","fling"},{"Speed Hack","speed"},{"ESP Hack","esp"},{"Teleport Hack","teleport"},{"Fly Hack","fly"},{"Infinite Yield","iy"},{"Noclip Hack","noclip"}}
local hackButtons = {}
for i, data in ipairs(hackList) do
	local button = Instance.new("TextButton", MainFrame)
	button.Size = UDim2.new(0.9,0,0,30)
	button.Position = UDim2.new(0.05,0,0,40 + (i-1)*35)
	button.BackgroundColor3 = Color3.fromRGB(50,50,150)
	button.TextColor3 = Color3.new(1,1,1)
	button.TextScaled = true
	button.Text = data[1]
	hackButtons[data[2]] = button
end
local function createSubGUI(titleText, sizeX, sizeY)
	local frame = Instance.new("Frame", ScreenGui)
	frame.Size = UDim2.new(0, sizeX, 0, sizeY)
	frame.Position = UDim2.new(0.5, -sizeX/2, 0.5, -sizeY/2)
	frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
	frame.Active = true
	frame.Draggable = true
	local title = Instance.new("TextLabel", frame)
	title.Size = UDim2.new(1,0,0,30)
	title.BackgroundTransparency = 1
	title.Text = titleText
	title.TextColor3 = Color3.new(1,1,1)
	title.TextScaled = true
	local closeBtn = Instance.new("TextButton", frame)
	closeBtn.Size = UDim2.new(0,20,0,20)
	closeBtn.Position = UDim2.new(1,-25,0,5)
	closeBtn.Text = "X"
	closeBtn.TextScaled = true
	closeBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
	return frame, closeBtn
end
local flingFrame, flingEnabled = nil, false
local function disableFling()
	if HRP then
		for _, c in ipairs(HRP:GetChildren()) do
			if c.Name == "FlingGyro" then c:Destroy() end
		end
	end
	flingEnabled = false
end
local function enableFling()
	flingEnabled = true
	local rootJoint = HRP:FindFirstChild("RootJoint") or Character:FindFirstChild("RootJoint", true)
	if rootJoint then rootJoint:Destroy() end
	local bg = Instance.new("BodyGyro")
	bg.Name = "FlingGyro"
	bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
	bg.P = 3000
	bg.Parent = HRP
end
local function showFlingGUI()
	if flingFrame then
		flingFrame.Visible = true
		return
	end
	local frame, closeBtn = createSubGUI("Fling Hack", 250, 150)
	flingFrame = frame
	local toggleBtn = Instance.new("TextButton", flingFrame)
	toggleBtn.Size = UDim2.new(0.8,0,0,30)
	toggleBtn.Position = UDim2.new(0.1,0,0,50)
	toggleBtn.Text = "Enable"
	toggleBtn.TextScaled = true
	toggleBtn.BackgroundColor3 = Color3.fromRGB(50,150,50)
	toggleBtn.MouseButton1Click:Connect(function()
		flingEnabled = not flingEnabled
		if flingEnabled then
			toggleBtn.Text = "Disable"
			enableFling()
		else
			toggleBtn.Text = "Enable"
			disableFling()
		end
	end)
	closeBtn.MouseButton1Click:Connect(function()
		flingFrame.Visible = false
		if flingEnabled then toggleBtn.Text = "Enable" end
		disableFling()
	end)
end
hackButtons["fling"].MouseButton1Click:Connect(showFlingGUI)
local speedFrame, speedEnabled = nil, false
local defaultSpeed = 16
local function disableSpeed()
	if Humanoid then Humanoid.WalkSpeed = defaultSpeed end
	speedEnabled = false
end
local function showSpeedGUI()
	if speedFrame then
		speedFrame.Visible = true
		return
	end
	local frame, closeBtn = createSubGUI("Speed Hack", 250, 150)
	speedFrame = frame
	local speedBox = Instance.new("TextBox", speedFrame)
	speedBox.Size = UDim2.new(0.8,0,0,30)
	speedBox.Position = UDim2.new(0.1,0,0,50)
	speedBox.TextScaled = true
	speedBox.Text = "16"
	speedBox.BackgroundColor3 = Color3.fromRGB(60,60,180)
	speedBox.TextColor3 = Color3.new(1,1,1)
	local toggleBtn = Instance.new("TextButton", speedFrame)
	toggleBtn.Size = UDim2.new(0.8,0,0,30)
	toggleBtn.Position = UDim2.new(0.1,0,0,90)
	toggleBtn.TextScaled = true
	toggleBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
	toggleBtn.Text = "Disabled"
	toggleBtn.MouseButton1Click:Connect(function()
		speedEnabled = not speedEnabled
		if speedEnabled then
			local val = tonumber(speedBox.Text) or 16
			Humanoid.WalkSpeed = val
			toggleBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)
			toggleBtn.Text = "Enabled"
		else
			Humanoid.WalkSpeed = defaultSpeed
			toggleBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
			toggleBtn.Text = "Disabled"
		end
	end)
	closeBtn.MouseButton1Click:Connect(function()
		speedFrame.Visible = false
		disableSpeed()
		toggleBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
		toggleBtn.Text = "Disabled"
	end)
end
hackButtons["speed"].MouseButton1Click:Connect(showSpeedGUI)
local espFrame, espEnabled = nil, false
local function disableESP()
	for _, p in pairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character then
			local h = p.Character:FindFirstChild("ESP_Highlight")
			if h then h:Destroy() end
		end
	end
	espEnabled = false
end
local function enableESP()
	for _, p in pairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character then
			if not p.Character:FindFirstChild("ESP_Highlight") then
				local highlight = Instance.new("Highlight")
				highlight.Name = "ESP_Highlight"
				highlight.FillColor = Color3.fromRGB(255,0,0)
				highlight.Parent = p.Character
			end
		end
	end
	espEnabled = true
end
local function showESPGUI()
	if espFrame then
		espFrame.Visible = true
		return
	end
	local frame, closeBtn = createSubGUI("ESP Hack", 250, 150)
	espFrame = frame
	local toggleBtn = Instance.new("TextButton", espFrame)
	toggleBtn.Size = UDim2.new(0.8,0,0,30)
	toggleBtn.Position = UDim2.new(0.1,0,0,50)
	toggleBtn.Text = "Enable ESP"
	toggleBtn.TextScaled = true
	toggleBtn.BackgroundColor3 = Color3.fromRGB(50,150,50)
	toggleBtn.MouseButton1Click:Connect(function()
		espEnabled = not espEnabled
		if espEnabled then
			toggleBtn.Text = "Disable ESP"
			enableESP()
		else
			toggleBtn.Text = "Enable ESP"
			disableESP()
		end
	end)
	closeBtn.MouseButton1Click:Connect(function()
		espFrame.Visible = false
		disableESP()
		toggleBtn.Text = "Enable ESP"
	end)
end
hackButtons["esp"].MouseButton1Click:Connect(showESPGUI)
Players.PlayerAdded:Connect(function(p)
	if p ~= LocalPlayer then
		p.CharacterAdded:Connect(function(char)
			if espEnabled then
				local highlight = Instance.new("Highlight")
				highlight.Name = "ESP_Highlight"
				highlight.FillColor = Color3.fromRGB(255,0,0)
				highlight.Parent = char
			end
		end)
	end
end)
hackButtons["teleport"].MouseButton1Click:Connect(function()
	if not _G.TeleportHackLoaded then
		_G.TeleportHackLoaded = true
		loadstring(game:HttpGet("https://raw.githubusercontent.com/SomeUser/UniversalTeleport/main/source"))()
	end
end)
local flyFrame, flyEnabled = nil, false
local flyConnection = nil
local flySpeed = 50
local function disableFly()
	flyEnabled = false
	if flyConnection then
		flyConnection:Disconnect()
		flyConnection = nil
	end
end
local function enableFly()
	flyEnabled = true
	flyConnection = RunService.Stepped:Connect(function()
		if not flyEnabled or not HRP then return end
		local moveVec = Vector3.new(0,0,0)
		if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveVec = moveVec + (workspace.CurrentCamera.CFrame.LookVector * flySpeed) end
		if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveVec = moveVec - (workspace.CurrentCamera.CFrame.LookVector * flySpeed) end
		if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveVec = moveVec - (workspace.CurrentCamera.CFrame.RightVector * flySpeed) end
		if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveVec = moveVec + (workspace.CurrentCamera.CFrame.RightVector * flySpeed) end
		if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveVec = moveVec + Vector3.new(0, flySpeed, 0) end
		if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then moveVec = moveVec - Vector3.new(0, flySpeed, 0) end
		HRP.Velocity = moveVec
	end)
end
local function showFlyGUI()
	if flyFrame then
		flyFrame.Visible = true
		return
	end
	local frame, closeBtn = createSubGUI("Fly Hack", 250, 150)
	flyFrame = frame
	local speedBox = Instance.new("TextBox", flyFrame)
	speedBox.Size = UDim2.new(0.8,0,0,30)
	speedBox.Position = UDim2.new(0.1,0,0,40)
	speedBox.TextScaled = true
	speedBox.Text = tostring(flySpeed)
	speedBox.BackgroundColor3 = Color3.fromRGB(60,60,180)
	speedBox.TextColor3 = Color3.new(1,1,1)
	local toggleBtn = Instance.new("TextButton", flyFrame)
	toggleBtn.Size = UDim2.new(0.8,0,0,30)
	toggleBtn.Position = UDim2.new(0.1,0,0,80)
	toggleBtn.Text = "Enable Fly"
	toggleBtn.TextScaled = true
	toggleBtn.BackgroundColor3 = Color3.fromRGB(50,150,50)
	toggleBtn.MouseButton1Click:Connect(function()
		flyEnabled = not flyEnabled
		if flyEnabled then
			flySpeed = tonumber(speedBox.Text) or 50
			toggleBtn.Text = "Disable Fly"
			enableFly()
		else
			toggleBtn.Text = "Enable Fly"
			disableFly()
		end
	end)
	closeBtn.MouseButton1Click:Connect(function()
		flyFrame.Visible = false
		disableFly()
		toggleBtn.Text = "Enable Fly"
	end)
end
hackButtons["fly"].MouseButton1Click:Connect(showFlyGUI)
local noclipFrame, noclipEnabled = nil, false
local noclipConnection = nil
local function disableNoclip()
	noclipEnabled = false
	if noclipConnection then
		noclipConnection:Disconnect()
		noclipConnection = nil
	end
	for _, v in ipairs(Character:GetDescendants()) do
		if v:IsA("BasePart") then v.CanCollide = true end
	end
end
local function enableNoclip()
	noclipEnabled = true
	noclipConnection = RunService.RenderStepped:Connect(function()
		for _, v in ipairs(Character:GetDescendants()) do
			if v:IsA("BasePart") then v.CanCollide = false end
		end
	end)
end
local function showNoclipGUI()
	if noclipFrame then
		noclipFrame.Visible = true
		return
	end
	local frame, closeBtn = createSubGUI("Noclip Hack", 250, 150)
	noclipFrame = frame
	local toggleBtn = Instance.new("TextButton", noclipFrame)
	toggleBtn.Size = UDim2.new(0.8,0,0,30)
	toggleBtn.Position = UDim2.new(0.1,0,0,50)
	toggleBtn.Text = "Enable Noclip"
	toggleBtn.TextScaled = true
	toggleBtn.BackgroundColor3 = Color3.fromRGB(50,150,50)
	toggleBtn.MouseButton1Click:Connect(function()
		noclipEnabled = not noclipEnabled
		if noclipEnabled then
			toggleBtn.Text = "Disable Noclip"
			enableNoclip()
		else
			toggleBtn.Text = "Enable Noclip"
			disableNoclip()
		end
	end)
	closeBtn.MouseButton1Click:Connect(function()
		noclipFrame.Visible = false
		disableNoclip()
		toggleBtn.Text = "Enable Noclip"
	end)
end
hackButtons["noclip"].MouseButton1Click:Connect(showNoclipGUI)
hackButtons["iy"].MouseButton1Click:Connect(function()
	if not _G.InfiniteYieldLoaded then
		_G.InfiniteYieldLoaded = true
		loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
	end
end)
