local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:FindFirstChildOfClass("Humanoid")

-- Persistent state for auto clicking
local autoClicking = false

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 350, 0, 550)
MainFrame.Position = UDim2.new(0.5, -175, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 50)
MainFrame.BorderSizePixel = 5
MainFrame.Draggable = true
MainFrame.Active = true

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 50)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Universal ClientSide Hacks"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true

local FollowLabel = Instance.new("TextLabel", MainFrame)
FollowLabel.Size = UDim2.new(1, 0, 0, 30)
FollowLabel.Position = UDim2.new(0, 0, 0.92, 0)
FollowLabel.BackgroundTransparency = 1
FollowLabel.Font = Enum.Font.SourceSansBold
FollowLabel.Text = "Follow Zyph on ScriptBlox"
FollowLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
FollowLabel.TextScaled = true

local function createButton(name, position, callback)
    local button = Instance.new("TextButton", MainFrame)
    button.Size = UDim2.new(0.9, 0, 0, 40)
    button.Position = UDim2.new(0.05, 0, 0, position)
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 150)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = name
    button.Font = Enum.Font.GothamBold
    button.TextScaled = true
    button.MouseButton1Click:Connect(callback)
end

local function createSubMenu(titleText)
    local SubFrame = Instance.new("Frame", ScreenGui)
    SubFrame.Size = UDim2.new(0, 300, 0, 250)
    SubFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
    SubFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 80)
    SubFrame.Visible = false
    SubFrame.Draggable = true
    
    local SubTitle = Instance.new("TextLabel", SubFrame)
    SubTitle.Size = UDim2.new(1, 0, 0, 40)
    SubTitle.BackgroundTransparency = 1
    SubTitle.Font = Enum.Font.SourceSansBold
    SubTitle.Text = titleText
    SubTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    SubTitle.TextScaled = true
    
    local CloseButton = Instance.new("TextButton", SubFrame)
    CloseButton.Size = UDim2.new(0.3, 0, 0, 30)
    CloseButton.Position = UDim2.new(0.7, 0, 0, 10)
    CloseButton.Text = "Close"
    CloseButton.TextScaled = true
    CloseButton.MouseButton1Click:Connect(function()
        SubFrame.Visible = false
    end)
    
    return SubFrame
end

-- Speed Hack submenu
local SpeedMenu = createSubMenu("Speed Hack")
local SpeedInput = Instance.new("TextBox", SpeedMenu)
SpeedInput.Size = UDim2.new(0.8, 0, 0, 40)
SpeedInput.Position = UDim2.new(0.1, 0, 0.3, 0)
SpeedInput.PlaceholderText = "Enter Speed"
SpeedInput.TextScaled = true
SpeedInput.BackgroundColor3 = Color3.fromRGB(60, 60, 180)

local SpeedApply = Instance.new("TextButton", SpeedMenu)
SpeedApply.Size = UDim2.new(0.8, 0, 0, 40)
SpeedApply.Position = UDim2.new(0.1, 0, 0.6, 0)
SpeedApply.Text = "Apply"
SpeedApply.TextScaled = true
SpeedApply.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
SpeedApply.MouseButton1Click:Connect(function()
    local speed = tonumber(SpeedInput.Text)
    if speed then
        humanoid.WalkSpeed = speed
    end
end)

-- Toggle the main GUI with the "K" key
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.K and not gameProcessed then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Fling button
createButton("Fling", 60, function()
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.Velocity = Vector3.new(math.random(-500, 500), math.random(500, 1000), math.random(-500, 500))
        hrp.RotVelocity = Vector3.new(math.random(-30, 30), math.random(-30, 30), math.random(-30, 30))
    end
end)

-- Speed Hack button
createButton("Speed Hack", 110, function() 
    SpeedMenu.Visible = true 
end)

-- Enable ESP button
createButton("Enable ESP", 160, function()
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character then
            local highlight = p.Character:FindFirstChild("ESP_Highlight")
            if not highlight then
                highlight = Instance.new("Highlight")
                highlight.Name = "ESP_Highlight"
                highlight.FillColor = Color3.fromRGB(255, 0, 0)
                highlight.Parent = p.Character
            end
        end
    end
end)

-- Invisibility button
createButton("Invisibility", 210, function()
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Transparency = 1
        end
    end
end)

-- Teleport button (update targetName as needed)
createButton("Teleport", 260, function()
    local targetName = "TargetNameHere"  -- Replace with the desired target player's name
    local target = Players:FindFirstChild(targetName)
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        character:MoveTo(target.Character.HumanoidRootPart.Position)
    else
        warn("Target player not found or does not have a character.")
    end
end)

-- Toggle Auto Clicker button
createButton("Toggle Auto Clicker", 310, function()
    autoClicking = not autoClicking
    if autoClicking then
        task.spawn(function()
            while autoClicking do
                -- Replace this with your preferred method to simulate a click.
                -- For example, if your executor supports a 'mouse1click' function, use that.
                if type(mouse1click) == "function" then
                    mouse1click()
                else
                    -- Alternatively, if using VirtualInputManager:
                    -- local VirtualInputManager = game:GetService("VirtualInputManager")
                    -- VirtualInputManager:SendMouseButtonEvent(mouse.X, mouse.Y, 0, true, game, 0)
                end
                task.wait(0.1)
            end
        end)
    end
end)

-- Load Infinite Yield button
createButton("Load Infinite Yield", 360, function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end)
    if not success then
        warn("Failed to load Infinite Yield: " .. tostring(err))
    end
end)
